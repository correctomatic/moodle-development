lti_get_type_type_config -> devuelve una estructura con la configuración de la herramienta


El error lo está dando en auth.php línea 91:
```php
// If we're unable to load up config; we cannot trust the redirect uri for POSTing to.
if (empty($config)) {
    throw new moodle_exception('invalidrequest', 'error');
} else {
    $uris = array_map("trim", explode("\n", $config->lti_redirectionuris));
    if (!in_array($redirecturi, $uris)) {
        throw new moodle_exception('invalidrequest', 'error');
    }
}
```

$redirecturi vale "http://localhost:5000" y no está en la lista de redirecciones

La redirect uri sale de:
```php
$redirecturi = optional_param('redirect_uri', '', PARAM_URL);
```

Que es de la petición que se hace a auth.ph:
http://localhost:8080/mod/lti/auth.php?scope=openid&response_type=id_token&response_mode=form_post&prompt=none&client_id=LfsIbPy0kerGaOA&redirect_uri=http%3A%2F%2Flocalhost%3A5000&state=state-6932e230-9112-4e59-8543-6a9417986de4&nonce=9ea8a3912bc94116a29b668c2b2dd1c4d2f4c7dc2aeb11efbb600242ac150005&login_hint=2&lti_message_hint=3

¿De donde sale? tool url?



"<form action="http://localhost:5000/launch" name="ltiAuthForm" id="ltiAuthForm" method="post" enctype="application/x-www-form-urlencoded">
  <input type="hidden" name="id_token" value="eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6ImU1ZGEyODY0NTkxZDg4OWY3ZTU1In0.eyJub25jZSI6Ijk0OGM2ZGI1NmQ2NzQ5ZmJhYjQ5YzNlZmQ4N2Y5NzVkNjI4MDAxMjAyYWVmMTFlZjlmYmYwMjQyYWMxNTAwMDUiLCJpYXQiOjE3MTg0Mzk0MjIsImV4cCI6MTcxODQzOTQ4MiwiaXNzIjoiaHR0cDpcL1wvbG9jYWxob3N0OjgwODAiLCJhdWQiOiJLQ1F3N0JBRUxSS0VhOHgiLCJodHRwczpcL1wvcHVybC5pbXNnbG9iYWwub3JnXC9zcGVjXC9sdGlcL2NsYWltXC9kZXBsb3ltZW50X2lkIjoiMiIsImh0dHBzOlwvXC9wdXJsLmltc2dsb2JhbC5vcmdcL3NwZWNcL2x0aVwvY2xhaW1cL3RhcmdldF9saW5rX3VyaSI6Imh0dHA6XC9cL2xvY2FsaG9zdDo1MDAwXC9sYXVuY2giLCJzdWIiOiIyIiwiaHR0cHM6XC9cL3B1cmwuaW1zZ2xvYmFsLm9yZ1wvc3BlY1wvbHRpXC9jbGFpbVwvbGlzIjp7InBlcnNvbl9zb3VyY2VkaWQiOiIiLCJjb3Vyc2Vfc2VjdGlvbl9zb3VyY2VkaWQiOiIifSwiaHR0cHM6XC9cL3B1cmwuaW1zZ2xvYmFsLm9yZ1wvc3BlY1wvbHRpXC9jbGFpbVwvcm9sZXMiOlsiaHR0cDpcL1wvcHVybC5pbXNnbG9iYWwub3JnXC92b2NhYlwvbGlzXC92MlwvaW5zdGl0dXRpb25cL3BlcnNvbiNBZG1pbmlzdHJhdG9yIiwiaHR0cDpcL1wvcHVybC5pbXNnbG9iYWwub3JnXC92b2NhYlwvbGlzXC92MlwvbWVtYmVyc2hpcCNJbnN0cnVjdG9yIiwiaHR0cDpcL1wvcHVybC5pbXNnbG9iYWwub3JnXC92b2NhYlwvbGlzXC92Mlwvc3lzdGVtXC9wZXJzb24jQWRtaW5pc3RyYXRvciJdLCJodHRwczpcL1wvcHVybC5pbXNnbG9iYWwub3JnXC9zcGVjXC9sdGlcL2NsYWltXC9jb250ZXh0Ijp7ImlkIjoiMiIsImxhYmVsIjoiY3Vyc28tZGUtcHJ1ZWJhcyIsInRpdGxlIjoiQ3Vyc28gZGUgcHJ1ZWJhcyIsInR5cGUiOlsiQ291cnNlU2VjdGlvbiJdfSwiaHR0cHM6XC9cL3B1cmwuaW1zZ2xvYmFsLm9yZ1wvc3BlY1wvbHRpXC9jbGFpbVwvcmVzb3VyY2VfbGluayI6eyJ0aXRsZSI6IlBydWViYSAyIiwiZGVzY3JpcHRpb24iOiIiLCJpZCI6IjMifSwiaHR0cHM6XC9cL3B1cmwuaW1zZ2xvYmFsLm9yZ1wvc3BlY1wvbHRpLWJvXC9jbGFpbVwvYmFzaWNvdXRjb21lIjp7Imxpc19yZXN1bHRfc291cmNlZGlkIjoie1wiZGF0YVwiOntcImluc3RhbmNlaWRcIjpcIjNcIixcInVzZXJpZFwiOlwiMlwiLFwidHlwZWlkXCI6XCIyXCIsXCJsYXVuY2hpZFwiOjIwMDA1MTYxODJ9LFwiaGFzaFwiOlwiNDE0NjEwMDhiY2Q1ZGJlNTJlYTM5OTRhOTA1MzVhNDFhMmI3MDRmODQzZGMyNjljOGQ3M2MwZDI4MzFjODI2ZlwifSIsImxpc19vdXRjb21lX3NlcnZpY2VfdXJsIjoiaHR0cDpcL1wvbG9jYWxob3N0OjgwODBcL21vZFwvbHRpXC9zZXJ2aWNlLnBocCJ9LCJnaXZlbl9uYW1lIjoiQWRtaW4iLCJmYW1pbHlfbmFtZSI6IlVzZXIiLCJuYW1lIjoiQWRtaW4gVXNlciIsImh0dHBzOlwvXC9wdXJsLmltc2dsb2JhbC5vcmdcL3NwZWNcL2x0aVwvY2xhaW1cL2V4dCI6eyJ1c2VyX3VzZXJuYW1lIjoiYWRtaW4iLCJsbXMiOiJtb29kbGUtMiJ9LCJlbWFpbCI6InNwYW0xQGdhbW11LmNvbSIsImh0dHBzOlwvXC9wdXJsLmltc2dsb2JhbC5vcmdcL3NwZWNcL2x0aVwvY2xhaW1cL2xhdW5jaF9wcmVzZW50YXRpb24iOnsibG9jYWxlIjoiZW4iLCJkb2N1bWVudF90YXJnZXQiOiJpZnJhbWUiLCJyZXR1cm5fdXJsIjoiaHR0cDpcL1wvbG9jYWxob3N0OjgwODBcL21vZFwvbHRpXC9yZXR1cm4ucGhwP2NvdXJzZT0yJmxhdW5jaF9jb250YWluZXI9MyZpbnN0YW5jZWlkPTMmc2Vzc2tleT1FNEVobVhGdGJrIn0sImh0dHBzOlwvXC9wdXJsLmltc2dsb2JhbC5vcmdcL3NwZWNcL2x0aVwvY2xhaW1cL3Rvb2xfcGxhdGZvcm0iOnsicHJvZHVjdF9mYW1pbHlfY29kZSI6Im1vb2RsZSIsInZlcnNpb24iOiIyMDIxMDUxNzE4IiwiZ3VpZCI6ImxvY2FsaG9zdCIsIm5hbWUiOiJzaXRpb2RlcHJ1ZWJhcyIsImRlc2NyaXB0aW9uIjoiU2l0aW8gZGUgcHJ1ZWJhcyJ9LCJodHRwczpcL1wvcHVybC5pbXNnbG9iYWwub3JnXC9zcGVjXC9sdGlcL2NsYWltXC92ZXJzaW9uIjoiMS4zLjAiLCJodHRwczpcL1wvcHVybC5pbXNnbG9iYWwub3JnXC9zcGVjXC9sdGlcL2NsYWltXC9tZXNzYWdlX3R5cGUiOiJMdGlSZXNvdXJjZUxpbmtSZXF1ZXN0In0.RFDm1kMp4LAAaF3FW4HCaJLJdqnEF9FuGb0QNLwaFouIoOPm8FA23i0UFiXG99KcWsX_ZHit9mIkf2q5CKn2NHSyHkXUIVTgP3RUwkFKDdjUefQ_gAmZeXb8bUPf8xHCrfkOPZFCBm1_p0OU7qIxuba9BicWB1aPvn1_-NAlXewkReOfALC0Ki-THYjxnwNFS9hYH1MNlnDZFWLXFSmyPy766na7j8FqCDTIcN6XbgOnhz6OPKLG5yDjk-HrTmoaL3j_0mdImQB_fhqWu3oNlUyyQyj4HGASwzAY_Q3fFa-lQ9baiPqFpSL-8yIsbDkv8Y7wXOqEAkcOV_eXV8CE-A"/>
  <input type="hidden" name="state" value="state-b6a0dc69-c01a-4c4b-b60d-8829878447eb"/>
</form>
<script type="text/javascript">
//<![CDATA[
document.ltiAuthForm.submit();
//]]>
</script>
"
